<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì¹´ë¦¬ë‚˜ ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆ í”Œë ˆì´ì–´ë¸” ë°ëª¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    /* ì „ì²´ í˜ì´ì§€ ë°°ê²½ â€“ ë°ì€ íŒŒìŠ¤í…” ê·¸ë¼ë°ì´ì…˜ */
    body {
      background: linear-gradient(180deg, #f3f7ff, #fdefff);
      color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    /* ê´‘ê³  ì „ì²´ í”„ë ˆì„ */
    .game-wrapper {
      width: 320px;
      height: 568px;
      background: linear-gradient(180deg, #f9fbff, #fff5ff);
      border-radius: 16px;
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.1);
      padding: 16px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
      position: relative;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      opacity: 0.9;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .logo-image {
      height: 18px;
      object-fit: contain;
      display: block;
    }

    .tag {
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      font-size: 10px;
      color: #7a5c96;
      box-shadow: 0 0 8px rgba(186, 141, 215, 0.3);
    }

    .game-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      gap: 12px;
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      color: #222;
    }

    .subtitle {
      font-size: 13px;
      opacity: 0.85;
      line-height: 1.4;
      padding: 0 12px;
      color: #444;
    }

    .status {
      display: flex;
      justify-content: center;
      gap: 16px;
      font-size: 12px;
      margin-top: 6px;
      color: #555;
    }

    .status span {
      opacity: 0.95;
    }

    .highlight {
      color: #e06ab0;
      font-weight: 600;
    }

    .brand-hero {
      margin-bottom: 4px;
    }

    .brand-hero-logo {
      height: 28px;
      object-fit: contain;
      display: block;
    }

    .brand-mini {
      position: absolute;
      top: 52px;
      right: 18px;
      opacity: 0.9;
    }

    .brand-mini-logo {
      height: 20px;
      object-fit: contain;
      display: block;
    }

    .cards {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 12px;
    }

    /* ìƒí’ˆ ì¹´ë“œ â€“ ë°ì€ ë°°ê²½ + í•‘í¬ ê·¸ë¦¼ì */
    .card {
      width: 84px;
      height: 100px;
      border-radius: 14px;
      background: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      user-select: none;
      transition: transform 0.08s ease, box-shadow 0.1s ease;
      border: 1px solid #f3d9f0;
      box-shadow: 0 6px 14px rgba(230, 173, 214, 0.35);
      overflow: hidden;
    }

    .card img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      pointer-events: none;
    }

    .card:active {
      transform: scale(0.96);
      box-shadow: 0 2px 8px rgba(200, 150, 210, 0.4);
    }

    .card.disabled {
      opacity: 0.45;
      pointer-events: none;
      box-shadow: none;
    }

    .game-footer {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 10px;
      opacity: 0.75;
      color: #555;
    }

    .primary-btn {
      width: 100%;
      padding: 10px 0;
      border-radius: 999px;
      border: none;
      background: linear-gradient(90deg, #ff93c9, #f8b3ff);
      font-weight: 700;
      font-size: 14px;
      cursor: pointer;
      margin-top: 4px;
      color: #44223a;
      box-shadow: 0 6px 14px rgba(245, 152, 199, 0.6);
    }

    .primary-btn:active {
      transform: translateY(1px);
      opacity: 0.95;
      box-shadow: 0 2px 8px rgba(220, 130, 190, 0.6);
    }

    .hidden {
      display: none !important;
    }

    .badge {
      font-size: 11px;
      padding: 4px 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(206, 171, 238, 0.9);
      color: #7c5aa0;
      margin-top: 4px;
      box-shadow: 0 4px 10px rgba(196, 163, 232, 0.5);
    }

    .timer-bar-wrap {
      width: 100%;
      height: 6px;
      background: rgba(250, 222, 246, 0.9);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 10px;
      box-shadow: inset 0 0 4px rgba(215, 166, 225, 0.6);
    }

    .timer-bar {
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, #ff7bbd, #ffb36f);
      transform-origin: left center;
      transform: scaleX(1);
      transition: transform 0.12s linear;
    }

    .result-title {
      font-size: 22px;
      font-weight: 800;
      color: #222;
    }

    .result-text {
      font-size: 13px;
      opacity: 0.9;
      margin-top: 6px;
      color: #444;
    }

    .cta-note {
      font-size: 11px;
      opacity: 0.75;
      margin-top: 2px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="game-wrapper">
    <!-- ìƒë‹¨ ì˜ì—­ -->
    <div class="game-header">
      <div class="logo">
        <img src="MLB.png" alt="MLB" class="logo-image" />
      </div>
      <div class="tag" id="phase-label">íŠœí† ë¦¬ì–¼</div>
    </div>

    <!-- ì¸íŠ¸ë¡œ í™”ë©´ -->
    <div class="game-main" id="screen-intro">
      <div class="brand-hero">
        <img src="MLB.png" alt="MLB" class="brand-hero-logo" />
      </div>
      <div class="title">10ì´ˆ ì•ˆì—<br />ì¹´ë¦¬ë‚˜ ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆë¥¼ ì¡ì•„ë´!</div>
      <div class="subtitle">
        ì—¬ëŸ¬ ê°œì˜ ë¹„ë‹ˆ ì¤‘ì—ì„œ <span class="highlight">ì¹´ë¦¬ë‚˜ì˜ ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆ</span>ë§Œ ê³¨ë¼ì„œ<br />
        <span class="highlight">5ë²ˆ</span> ë§ì¶”ë©´ ì„±ê³µì´ì—ìš”.
      </div>
      <div class="badge">í™”ë©´ì„ íƒ­í•´ì„œ ë°”ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”</div>
      <button class="primary-btn" id="start-btn">ê²Œì„ ì‹œì‘</button>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div class="game-main hidden" id="screen-game">
      <!-- ì‘ì€ MLB ë¡œê³  ë…¸ì¶œ -->
      <div class="brand-mini">
        <img src="MLB.png" alt="MLB" class="brand-mini-logo" />
      </div>

      <div class="title">ì–´ë””ì— ìˆ¨ì—ˆì„ê¹Œ? ğŸ‘€</div>
      <div class="subtitle">
        10ì´ˆ ì•ˆì— <span class="highlight">ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆ</span>ë§Œ í´ë¦­í•´ì„œ<br />
        5ì ì„ ì±„ì›Œë³´ì„¸ìš”!
      </div>

      <div class="status">
        <span>ë‚¨ì€ ì‹œê°„: <span id="time-left">10.0</span>s</span>
        <span>ì ìˆ˜: <span id="score">0</span>/5</span>
      </div>

      <div class="cards" id="cards-wrap">
        <!-- JSë¡œ ì¹´ë“œê°€ ì±„ì›Œì§ -->
      </div>

      <div class="timer-bar-wrap">
        <div class="timer-bar" id="timer-bar"></div>
      </div>
    </div>

    <!-- ê²°ê³¼ í™”ë©´ -->
    <div class="game-main hidden" id="screen-result">
      <div id="result-success" class="">
        <div class="brand-hero">
          <img src="MLB.png" alt="MLB" class="brand-hero-logo" />
        </div>
        <div class="result-title">ì„±ê³µ! ğŸ‰</div>
        <div class="result-text">
          ì¹´ë¦¬ë‚˜ì˜ ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆ ê°ê°, ì œëŒ€ë¡œì¸ë°ìš”?<br />
          ì§€ê¸ˆ ë°”ë¡œ ì´ì–´ì„œ ìŠ¤íƒ€ì¼ë§ì„ ì™„ì„±í•´ë³´ì„¸ìš”.
        </div>
        <button class="primary-btn" id="cta-btn">
          ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆ ë³´ëŸ¬ê°€ê¸°
        </button>
        <div class="cta-note">
          * ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤ì œ ìƒí’ˆ í˜ì´ì§€ ë˜ëŠ” ì•± ìŠ¤í† ì–´ë¡œ ì´ë™í•˜ë„ë¡ ì—°ë™í•©ë‹ˆë‹¤.
        </div>
      </div>

      <div id="result-fail" class="hidden">
        <div class="brand-hero">
          <img src="MLB.png" alt="MLB" class="brand-hero-logo" />
        </div>
        <div class="result-title">ì•„ì‰½ë„¤ìš”! ğŸ˜¢</div>
        <div class="result-text">
          ê±°ì˜ ë‹¤ ì™”ì–´ìš”.<br />
          ì‹¤ì œ í˜ì´ì§€ì—ì„œëŠ” ë” ì—¬ìœ ë¡­ê²Œ ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆë¥¼ ë§Œë‚˜ë³¼ ìˆ˜ ìˆì–´ìš”.
        </div>
        <button class="primary-btn" id="retry-btn">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
      </div>
    </div>

    <!-- í•˜ë‹¨ ì„¤ëª… -->
    <div class="game-footer">
      <div>ì´ ë°ëª¨ëŠ” HTML5ë¡œ ë§Œë“  <b>MLB í”Œë ˆì´ì–´ë¸” ê´‘ê³  ì˜ˆì‹œ</b>ì…ë‹ˆë‹¤.</div>
      <div>
        ì‹¤ì œ ì§‘í–‰ ì‹œì—ëŠ” SDKì—ì„œ WebViewë¡œ ì´ íŒŒì¼ì„ ë¡œë”©í•˜ê³ ,<br />
        CTA í´ë¦­ ì‹œ ìƒí’ˆ ìƒì„¸ ë˜ëŠ” ì•± ìŠ¤í† ì–´ URLë¡œ ì—°ë™í•©ë‹ˆë‹¤.
      </div>
    </div>
  </div>

  <script>
    // ---------------------
    // ì´ë¯¸ì§€ ì„¸íŒ…
    // ---------------------
    const MIYAONG_IMAGES = [
      "ë¯¸ì•¼ì˜¹ë¹„ë‹ˆ1.png",
      "ë¯¸ì•¼ì˜¹ë¹„ë‹ˆ2.png",
      "ë¯¸ì•¼ì˜¹ë¹„ë‹ˆ3.png"
    ];

    const NORMAL_IMAGES = [
      "ì¼ë°˜ë¹„ë‹ˆ1.png",
      "ì¼ë°˜ë¹„ë‹ˆ2.png",
      "ì¼ë°˜ë¹„ë‹ˆ3.png",
      "ì¼ë°˜ë¹„ë‹ˆ4.png"
    ];

    // ---------------------
    // ê²Œì„ ì„¤ì •ê°’
    // ---------------------
    const GAME_DURATION = 10_000; // 10ì´ˆ
    const TARGET_SCORE = 5;

    let score = 0;
    let timeLeft = GAME_DURATION; // ms
    let lastTick = null;
    let gameEnded = false;
    let timerId = null;

    // DOM ìš”ì†Œ
    const screenIntro = document.getElementById("screen-intro");
    const screenGame = document.getElementById("screen-game");
    const screenResult = document.getElementById("screen-result");
    const startBtn = document.getElementById("start-btn");
    const retryBtn = document.getElementById("retry-btn");
    const ctaBtn = document.getElementById("cta-btn");
    const phaseLabel = document.getElementById("phase-label");
    const timeLeftEl = document.getElementById("time-left");
    const scoreEl = document.getElementById("score");
    const timerBar = document.getElementById("timer-bar");
    const cardsWrap = document.getElementById("cards-wrap");
    const resultSuccess = document.getElementById("result-success");
    const resultFail = document.getElementById("result-fail");

    function showScreen(id) {
      screenIntro.classList.add("hidden");
      screenGame.classList.add("hidden");
      screenResult.classList.add("hidden");

      if (id === "intro") screenIntro.classList.remove("hidden");
      if (id === "game") screenGame.classList.remove("hidden");
      if (id === "result") screenResult.classList.remove("hidden");
    }

    function resetGame() {
      score = 0;
      timeLeft = GAME_DURATION;
      lastTick = null;
      gameEnded = false;
      timerBar.style.transform = "scaleX(1)";
      scoreEl.textContent = score;
      timeLeftEl.textContent = (timeLeft / 1000).toFixed(1);
      phaseLabel.textContent = "í”Œë ˆì´ ì¤‘";
      if (timerId) cancelAnimationFrame(timerId);
      timerId = null;
      createNewRound();
    }

    function startGame() {
      showScreen("game");
      resetGame();
      lastTick = performance.now();
      timerId = requestAnimationFrame(updateTimer);
    }

    function updateTimer(now) {
      if (gameEnded) return;
      if (!lastTick) lastTick = now;

      const delta = now - lastTick;
      lastTick = now;
      timeLeft -= delta;

      if (timeLeft < 0) timeLeft = 0;

      timeLeftEl.textContent = (timeLeft / 1000).toFixed(1);
      const progress = timeLeft / GAME_DURATION;
      timerBar.style.transform = `scaleX(${progress})`;

      if (timeLeft <= 0) {
        endGame(score >= TARGET_SCORE);
      } else {
        timerId = requestAnimationFrame(updateTimer);
      }
    }

    function endGame(isSuccess) {
      gameEnded = true;
      phaseLabel.textContent = "ê²°ê³¼";

      // ì¹´ë“œ í´ë¦­ ë§‰ê¸°
      const allCards = document.querySelectorAll(".card");
      allCards.forEach((c) => c.classList.add("disabled"));

      showScreen("result");
      if (isSuccess) {
        resultSuccess.classList.remove("hidden");
        resultFail.classList.add("hidden");
      } else {
        resultSuccess.classList.add("hidden");
        resultFail.classList.remove("hidden");
      }
    }

    function getRandomItem(arr) {
      const idx = Math.floor(Math.random() * arr.length);
      return arr[idx];
    }

    function createNewRound() {
      cardsWrap.innerHTML = "";

      // ì¹´ë“œ 3ê°œ ì¤‘ 1ê°œë§Œ ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆ, ë‚˜ë¨¸ì§€ëŠ” ì¼ë°˜ ë¹„ë‹ˆ
      const positions = [0, 1, 2];
      const correctIndex = positions[Math.floor(Math.random() * positions.length)];

      positions.forEach((pos, i) => {
        const card = document.createElement("div");
        card.className = "card";

        const isCorrect = i === correctIndex;
        const img = document.createElement("img");

        if (isCorrect) {
          img.src = getRandomItem(MIYAONG_IMAGES);
          img.alt = "ë¯¸ì•¼ì˜¹ ë¹„ë‹ˆ";
          card.dataset.type = "miyaong";
        } else {
          img.src = getRandomItem(NORMAL_IMAGES);
          img.alt = "ì¼ë°˜ ë¹„ë‹ˆ";
          card.dataset.type = "normal";
        }

        card.appendChild(img);

        card.addEventListener("click", () => {
          if (gameEnded) return;

          if (card.dataset.type === "miyaong") {
            score++;
            scoreEl.textContent = score;

            card.style.transform = "scale(1.05)";
            setTimeout(() => {
              card.style.transform = "scale(1)";
            }, 80);

            if (score >= TARGET_SCORE) {
              endGame(true);
            } else {
              setTimeout(createNewRound, 150);
            }
          } else {
            card.style.transform = "translateY(4px)";
            setTimeout(() => {
              card.style.transform = "translateY(0)";
            }, 80);
          }
        });

        cardsWrap.appendChild(card);
      });
    }

    // ë²„íŠ¼ ì´ë²¤íŠ¸
    startBtn.addEventListener("click", () => {
      startGame();
    });

    if (retryBtn) {
      retryBtn.addEventListener("click", () => {
        showScreen("game");
        startGame();
      });
    }

    if (ctaBtn) {
ctaBtn.addEventListener("click", () => {
  const landingUrl = "https://www.mlb-korea.com/display/promotions/collection/1557";
  window.open(landingUrl, "_blank");
      });
    }

    // ìµœì´ˆ ì§„ì…ì€ ì¸íŠ¸ë¡œ í™”ë©´
    showScreen("intro");
  </script>
</body>
</html>
